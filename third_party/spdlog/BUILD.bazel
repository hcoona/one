load("@rules_cc//cc:defs.bzl", "cc_library")

cc_library(
    name = "spdlog",
    srcs = [
        "async.cpp",
        "cfg.cpp",
        "color_sinks.cpp",
        "file_sinks.cpp",
        "fmt.cpp",
        "spdlog.cpp",
        "stdout_sinks.cpp",
    ],
    hdrs = glob(
        [
            "**/*.h",
        ],
        exclude = [
            "bench/**",
            "example/**",
            "tests/**",
        ],
    ),
    defines = [
        "SPDLOG_COMPILED_LIB",
        "SPDLOG_FMT_EXTERNAL",
        "SPDLOG_PREVENT_CHILD_FD",
    ],
    linkopts = ["-pthread"],
    visibility = ["//visibility:public"],
    deps = [
        "//third_party/fmt",
    ],
)
